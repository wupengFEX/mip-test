(window.MIP=window.MIP||[]).push({name:"mip-map",func:function(){define("mip-map/mip-map",["require","customElement"],function(n){function t(n,t){this.config=t,this.ele=n}var o=n("customElement").create();return t.prototype.show=function(){this.init(),this.append()},t.prototype.init=function(){var n=this.config,t=[],o={v:n.version||"2.0",ak:n.ak||"",t:(new Date).getTime(),callback:this.getCb()};for(var e in o)if(o.hasOwnProperty(e))t.push(e.concat("=",o[e]));this.mapUrl="https://api.map.baidu.com/api?"+t.join("&")},t.prototype.getCb=function(){return window.mapCallback=this.handleResult.bind(this),"mapCallback"},t.prototype.handleResult=function(){this.map=new BMap.Map(this.ele),this.map.centerAndZoom(new BMap.Point(116.404,39.915),11);var n=this.config,t=n.location;if(this.traverseAndConcat(t)&&t.city)this.handlePoint()},t.prototype.handlePoint=function(){var n=this,t=n.map,o=n.config,e=o.location,i=new BMap.Geocoder,a=n.traverseAndConcat(o.location);if(a&&e.city)i.getPoint(a,function(e){if(e){var i=new BMap.Marker(e);t.addOverlay(i),t.centerAndZoom(e,16),n.handleSyncOption({cfg:o,map:t,point:e,marker:i})}},e.city)},t.prototype.handleSyncOption=function(n){this.handleInfoWindow(n),this.handleControls(n)},t.prototype.handleControls=function(n){var t=this.config.controls;for(var o in t)if(t.hasOwnProperty(o)){var e=t[o]||{},i=BMap[o];i&&n.map.addControl(new i(e))}},t.prototype.handleInfoWindow=function(n){var t=n.cfg.info;if(t){var o=new BMap.InfoWindow(t.content,t);n.marker.addEventListener("click",function(){n.map.openInfoWindow(o,n.point)})}},t.prototype.traverseAndConcat=function(n){var t="";for(var o in n)if(n.hasOwnProperty(o)&&n[o])t+=n[o];return t},t.prototype.append=function(){if(!this.config.ak)return void console.error("请配置服务密钥（ak）");var n=document.createElement("script");n.src=this.mapUrl,document.body.appendChild(n)},o.prototype.jsonParse=function(n){try{return JSON.parse(n)}catch(n){return console.error(n),!1}},o.prototype.firstInviewCallback=function(){var n=this.element.querySelector('script[type="application/json"]'),o=this.jsonParse(n.textContent);o&&new t(this.element,o).show()},o}),define("mip-map",["mip-map/mip-map"],function(n){return n}),function(){function n(n,t){n.registerMipElement("mip-map",t,"")}if(window.MIP)require(["mip-map"],function(t){n(window.MIP,t)});else require(["mip","mip-map"],n)}()}});