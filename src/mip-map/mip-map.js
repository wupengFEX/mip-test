(window.MIP=window.MIP||[]).push({name:"mip-map",func:function(){define("mip-map/mip-map",["require","customElement"],function(n){function t(n,t){this.config=t,this.ele=n}var e=n("customElement").create();return t.prototype.show=function(){this.init(),this.append()},t.prototype.init=function(){var n=this.config,t=[],e={v:n.version||"2.0",ak:n.ak||"",t:(new Date).getTime(),callback:this.getCb()};for(var o in e)if(e.hasOwnProperty(o))t.push(o.concat("=",e[o]));this.mapUrl="https://api.map.baidu.com/api?"+t.join("&")},t.prototype.getCb=function(){return window.mapCallback=this.handleResult.bind(this),"mapCallback"},t.prototype.handleResult=function(){this.map=new BMap.Map(this.ele),this.map.centerAndZoom(new BMap.Point(116.404,39.915),11);var n=this.config,t=n.location;if(this.traverseAndConcat(t)&&t.city)this.handlePoint()},t.prototype.handlePoint=function(){var n=this,t=n.map,e=n.config,o=(e.location,new BMap.Geocoder,n.traverseAndConcat(e.location));if(o){var i=new BMap.LocalSearch(t,{renderOptions:{map:t}}),a={onSearchComplete:function(o){if(i.getStatus()===BMAP_STATUS_SUCCESS){var a=o.getPoi(0),r=a.point;if(a&&r){var p=new BMap.Marker(r);t.addOverlay(p),t.centerAndZoom(r,16),n.handleSyncOption({cfg:e,map:t,point:r,marker:p})}}}},i=new BMap.LocalSearch(t,a);i.search(o)}},t.prototype.handleSyncOption=function(n){this.handleInfoWindow(n),this.handleControls(n)},t.prototype.handleControls=function(n){var t=this.config.controls;for(var e in t)if(t.hasOwnProperty(e)){var o=t[e]||{},i=BMap[e];i&&n.map.addControl(new i(o))}},t.prototype.handleInfoWindow=function(n){var t=n.cfg.info;if(t){var e=new BMap.InfoWindow(t.content,t);n.marker.addEventListener("click",function(){n.map.openInfoWindow(e,n.point)})}},t.prototype.traverseAndConcat=function(n){var t="";for(var e in n)if(n.hasOwnProperty(e)&&n[e])t+=n[e];return t},t.prototype.append=function(){if(!this.config.ak)return void console.error("请配置服务密钥（ak）");var n=document.createElement("script");n.src=this.mapUrl,document.body.appendChild(n)},e.prototype.jsonParse=function(n){try{return JSON.parse(n)}catch(n){return console.error(n),!1}},e.prototype.firstInviewCallback=function(){var n=this.element.querySelector('script[type="application/json"]'),e=this.jsonParse(n.textContent);e&&new t(this.element,e).show()},e}),define("mip-map",["mip-map/mip-map"],function(n){return n}),function(){function n(n,t){n.registerMipElement("mip-map",t,"mip-map img{width:auto}")}if(window.MIP)require(["mip-map"],function(t){n(window.MIP,t)});else require(["mip","mip-map"],n)}()}});